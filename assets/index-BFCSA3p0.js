import{r as u,a as _}from"./react-uYDHyRUA.js";import{S as L,E as P,A as T,D as I,a as M,M as A,G as z}from"./icons-D9iLaytP.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var D={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B=u,G=Symbol.for("react.element"),F=Symbol.for("react.fragment"),U=Object.prototype.hasOwnProperty,V=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$={key:!0,ref:!0,__self:!0,__source:!0};function C(t,a,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),a.key!==void 0&&(o=""+a.key),a.ref!==void 0&&(i=a.ref);for(r in a)U.call(a,r)&&!$.hasOwnProperty(r)&&(s[r]=a[r]);if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:G,type:t,key:o,ref:i,props:s,_owner:V.current}}j.Fragment=F;j.jsx=C;j.jsxs=C;D.exports=j;var e=D.exports,R,N=_;R=N.createRoot,N.hydrateRoot;const W=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),q=t=>{if(!t)return"N/A";const a=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,n)).toFixed(2)} ${a[n]}`},K=t=>{if(t.endsWith("000"))return t;if(t.endsWith("800"))return t.slice(0,-3)+"000";const a=t.charAt(t.length-4),n=r=>r>="1"&&r<="9"?String(parseInt(r)-1):r>="b"&&r<="z"||r>="B"&&r<="Z"?String.fromCharCode(r.charCodeAt(0)-1):r;return t.slice(0,-4)+n(a)+"000"},H=t=>`https://api.nlib.cc/nx/${K(t)}/icon/128/128`;function J({type:t,data:a,searchQuery:n,onSearchChange:r}){const[s,o]=u.useState(1),[i,c]=u.useState(10),[d,h]=u.useState(null),f=u.useMemo(()=>{const l=[{key:"icon",label:"Icon",sortable:!1},{key:"id",label:"ID",sortable:!0}],g={"missing-titles":[{key:"Title Name",label:"Name",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0},{key:"size",label:"Size",sortable:!0}],"missing-dlcs":[{key:"dlc_name",label:"Name",sortable:!0},{key:"base_game",label:"Base Game",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0},{key:"size",label:"Size",sortable:!0}],"missing-updates":[{key:"Game Name",label:"Game",sortable:!0},{key:"Version",label:"Version",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0}],"missing-old-updates":[{key:"Version",label:"Version",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0}]};return[...l,...g[t]]},[t]),w=l=>{h(g=>({key:l,direction:g?.key===l&&g.direction==="asc"?"desc":"asc"}))},x=u.useMemo(()=>{let l=t==="missing-old-updates"?Object.entries(a).flatMap(([g,m])=>m.map(b=>({id:g,...b}))):Object.entries(a).map(([g,m])=>({id:g,...m}));if(n){const g=n.toLowerCase();l=l.filter(m=>Object.values(m).some(b=>b?String(b).toLowerCase().includes(g):!1))}return d&&l.sort((g,m)=>{let b=g[d.key],k=m[d.key];return d.key==="size"?(b=parseInt(b||"0",10),k=parseInt(k||"0",10)):d.key==="Release Date"&&(b=new Date(b).getTime(),k=new Date(k).getTime()),b<k?d.direction==="asc"?-1:1:b>k?d.direction==="asc"?1:-1:0}),l},[a,n,d,t]),p=Math.ceil(x.length/i),y=(s-1)*i,O=i===-1?x:x.slice(y,y+i);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-stretch sm:items-center",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent"}),e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 h-5 w-5"})]}),e.jsxs("a",{href:"https://nx-working.ghostland.at",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"View Working Content"]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsx("tr",{children:f.map((l,g)=>e.jsx("th",{onClick:()=>l.sortable&&w(l.key),className:`px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${l.sortable?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700":""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[l.label,l.sortable&&e.jsx(T,{className:`h-4 w-4 ${d?.key===l.key?"text-blue-500 dark:text-blue-400":""}`})]})},g))})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:O.map((l,g)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("img",{src:H(l.id),alt:"Game Icon",className:"w-12 h-12 sm:w-16 sm:h-16 rounded-lg shadow-md hover:shadow-lg transition-shadow",loading:"lazy"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-mono text-gray-900 dark:text-gray-100",children:l.id}),f.slice(2).map(m=>e.jsx("td",{className:"px-3 sm:px-6 py-4 text-xs sm:text-sm text-gray-900 dark:text-gray-100",children:e.jsx("div",{className:"max-w-[150px] sm:max-w-[200px] md:max-w-[300px] truncate",title:l[m.key],children:m.key==="Release Date"?W(l[m.key]):m.key==="size"?q(l[m.key]):l[m.key]})},m.key))]},g))})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("div",{className:"flex items-center w-full sm:w-auto",children:e.jsxs("select",{value:i,onChange:l=>{c(Number(l.target.value)),o(1)},className:"w-full sm:w-auto border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:-1,children:"All"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(l=>Math.max(1,l-1)),disabled:s===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",s," of ",p]}),e.jsx("button",{onClick:()=>o(l=>Math.min(p,l+1)),disabled:s===p,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Next"})]})]})]})}function E(t){var a,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(a=0;a<s;a++)t[a]&&(n=E(t[a]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function S(){for(var t,a,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(a=E(t))&&(r&&(r+=" "),r+=a);return r}function X({active:t,count:a,onClick:n,label:r}){return e.jsxs("button",{onClick:n,className:S("px-4 py-2 rounded-lg font-medium text-sm transition-colors duration-200 ease-in-out",t?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[r,e.jsx("span",{className:S("ml-2 px-2 py-0.5 rounded-full bg-opacity-20 text-xs font-semibold inline-block",t?"bg-white text-white":"bg-blue-100 text-blue-600"),children:a})]})}const Y=async()=>{try{const[t,a,n,r]=await Promise.all([fetch("/missing-titles.txt"),fetch("/missing-dlcs.txt"),fetch("/missing-updates.txt"),fetch("/missing-old-updates.json")]);if(!t.ok||!a.ok||!n.ok||!r.ok)throw new Error("Failed to load one or more data files");const[s,o,i]=await Promise.all([t.text(),a.text(),n.text()]),c=await r.json();return{"missing-titles":v(s,"titles"),"missing-dlcs":v(o,"dlcs"),"missing-updates":v(i,"updates"),"missing-old-updates":c}}catch(t){throw console.error("Error loading data:",t),t}},v=(t,a)=>{const n=t.trim().split(`
`).filter(s=>s.trim()),r={};return n.forEach(s=>{const o=s.split("|").map(i=>i.trim());switch(a){case"titles":if(o.length===4){const[i,c,d,h]=o;r[i]={"Release Date":c,"Title Name":d.length>50?d.substring(0,47)+"...":d,size:parseInt(h,10)||0}}break;case"dlcs":if(o.length===5){const[i,c,d,h,f]=o;r[i]={"Release Date":c,dlc_name:d.length>50?d.substring(0,47)+"...":d,base_game:h.length>50?h.substring(0,47)+"...":h,size:parseInt(f,10)||0}}break;case"updates":if(o.length===4){const[i,c,d,h]=o;r[i]={"Game Name":c.length>50?c.substring(0,47)+"...":c,Version:d,"Release Date":h}}break}}),r};function Z(){const[t,a]=u.useState(null),[n,r]=u.useState(!0),[s,o]=u.useState(null);return u.useEffect(()=>{(async()=>{try{r(!0),o(null);const c=await Y();a(c)}catch(c){console.error("Error loading data:",c),o(c instanceof Error?c:new Error("Failed to load data"))}finally{r(!1)}})()},[]),{data:t,isLoading:n,error:s}}function Q(){const[t,a]=u.useState("missing-titles"),[n,r]=u.useState(""),[s,o]=u.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||window.matchMedia("(prefers-color-scheme: dark)").matches:!1),{data:i,isLoading:c,error:d}=Z();if(u.useEffect(()=>{document.documentElement.classList.toggle("dark",s),localStorage.setItem("theme",s?"dark":"light")},[s]),c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading data..."})]})});if(d||!i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[e.jsxs("div",{className:"bg-red-100 dark:bg-red-900 rounded-lg p-6 mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-800 dark:text-red-200 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-600 dark:text-red-300",children:d?.message||"Failed to load data"})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})});const f={"missing-titles":Object.keys(i["missing-titles"]).length,"missing-dlcs":Object.keys(i["missing-dlcs"]).length,"missing-updates":Object.keys(i["missing-updates"]).length,"missing-old-updates":Object.values(i["missing-old-updates"]).flat().length},w=Object.values(f).reduce((x,p)=>x+p,0);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"NX Missing Content Tracker"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>o(!s),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":"Toggle theme",children:s?e.jsx(M,{className:"h-5 w-5"}):e.jsx(A,{className:"h-5 w-5"})}),e.jsxs("a",{href:"https://github.com/ghost-land/nx-missing",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx(z,{className:"h-6 w-6"}),e.jsx("span",{className:"hidden sm:inline",children:"View on GitHub"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-200",children:w})]}),Object.entries(f).map(([x,p])=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:x.split("-").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" ")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:p})]},x))]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Object.entries(f).map(([x,p])=>e.jsx(X,{type:x,active:t===x,count:p,onClick:()=>a(x),label:x.split("-").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" ")},x))}),e.jsx(J,{type:t,data:i[t],searchQuery:n,onSearchChange:r})]})})})}R(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Q,{})}));
//# sourceMappingURL=index-BFCSA3p0.js.map
