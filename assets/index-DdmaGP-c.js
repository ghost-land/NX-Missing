import{r as m,a as _}from"./react-uYDHyRUA.js";import{S as T,E as L,A,D as I,a as M,M as z,G as $,b as F}from"./icons-D5is6aQh.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var S={exports:{}},w={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U=m,B=Symbol.for("react.element"),G=Symbol.for("react.fragment"),V=Object.prototype.hasOwnProperty,J=U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W={key:!0,ref:!0,__self:!0,__source:!0};function E(t,s,n){var r,a={},o=null,i=null;n!==void 0&&(o=""+n),s.key!==void 0&&(o=""+s.key),s.ref!==void 0&&(i=s.ref);for(r in s)V.call(s,r)&&!W.hasOwnProperty(r)&&(a[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:B,type:t,key:o,ref:i,props:a,_owner:J.current}}w.Fragment=G;w.jsx=E;w.jsxs=E;S.exports=w;var e=S.exports,R,C=_;R=C.createRoot,C.hydrateRoot;const q=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),K=t=>{if(!t)return"N/A";const s=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,n)).toFixed(2)} ${s[n]}`},H=t=>{if(t.endsWith("000"))return t;if(t.endsWith("800"))return t.slice(0,-3)+"000";const s=t.charAt(t.length-4),n=r=>r>="1"&&r<="9"?String(parseInt(r)-1):r>="b"&&r<="z"||r>="B"&&r<="Z"?String.fromCharCode(r.charCodeAt(0)-1):r;return t.slice(0,-4)+n(s)+"000"},X=t=>`https://api.nlib.cc/nx/${H(t)}/icon/128/128`;function Y({type:t,data:s,searchQuery:n,onSearchChange:r}){const[a,o]=m.useState(1),[i,c]=m.useState(10),[d,h]=m.useState(null),x=m.useMemo(()=>{const l=[{key:"icon",label:"Icon",sortable:!1},{key:"id",label:"ID",sortable:!0}],g={"missing-titles":[{key:"Title Name",label:"Name",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0},{key:"size",label:"Size",sortable:!0}],"missing-dlcs":[{key:"dlc_name",label:"Name",sortable:!0},{key:"base_game",label:"Base Game",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0},{key:"size",label:"Size",sortable:!0}],"missing-updates":[{key:"Game Name",label:"Game",sortable:!0},{key:"Version",label:"Version",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0}],"missing-old-updates":[{key:"Version",label:"Version",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0}]};return[...l,...g[t]]},[t]),j=l=>{h(g=>({key:l,direction:g?.key===l&&g.direction==="asc"?"desc":"asc"}))},p=m.useMemo(()=>{let l=t==="missing-old-updates"?Object.entries(s).flatMap(([g,u])=>u.map(b=>({id:g,...b}))):Object.entries(s).map(([g,u])=>({id:g,...u}));if(n){const g=n.toLowerCase();l=l.filter(u=>Object.values(u).some(b=>b?String(b).toLowerCase().includes(g):!1))}return d&&l.sort((g,u)=>{let b=g[d.key],k=u[d.key];return d.key==="size"?(b=parseInt(b||"0",10),k=parseInt(k||"0",10)):d.key==="Release Date"&&(b=new Date(b).getTime(),k=new Date(k).getTime()),b<k?d.direction==="asc"?-1:1:b>k?d.direction==="asc"?1:-1:0}),l},[s,n,d,t]),y=Math.ceil(p.length/i),f=(a-1)*i,P=i===-1?p:p.slice(f,f+i);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-stretch sm:items-center",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent"}),e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 h-5 w-5"})]}),e.jsxs("a",{href:"https://nx-working.ghostland.at",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"View Working Content"]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsx("tr",{children:x.map((l,g)=>e.jsx("th",{onClick:()=>l.sortable&&j(l.key),className:`px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${l.sortable?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700":""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[l.label,l.sortable&&e.jsx(A,{className:`h-4 w-4 ${d?.key===l.key?"text-blue-500 dark:text-blue-400":""}`})]})},g))})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:P.map((l,g)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("img",{src:X(l.id),alt:"Game Icon",className:"w-12 h-12 sm:w-16 sm:h-16 rounded-lg shadow-md hover:shadow-lg transition-shadow",loading:"lazy"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-mono text-gray-900 dark:text-gray-100",children:l.id}),x.slice(2).map(u=>e.jsx("td",{className:"px-3 sm:px-6 py-4 text-xs sm:text-sm text-gray-900 dark:text-gray-100",children:e.jsx("div",{className:"max-w-[150px] sm:max-w-[200px] md:max-w-[300px] truncate",title:l[u.key],children:u.key==="Release Date"?q(l[u.key]):u.key==="size"?K(l[u.key]):l[u.key]})},u.key))]},g))})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("div",{className:"flex items-center w-full sm:w-auto",children:e.jsxs("select",{value:i,onChange:l=>{c(Number(l.target.value)),o(1)},className:"w-full sm:w-auto border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:-1,children:"All"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(l=>Math.max(1,l-1)),disabled:a===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",a," of ",y]}),e.jsx("button",{onClick:()=>o(l=>Math.min(y,l+1)),disabled:a===y,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Next"})]})]})]})}function O(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(n=O(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function D(){for(var t,s,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(s=O(t))&&(r&&(r+=" "),r+=s);return r}function Z({active:t,count:s,onClick:n,label:r}){return e.jsxs("button",{onClick:n,className:D("px-4 py-2 rounded-lg font-medium text-sm transition-colors duration-200 ease-in-out",t?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[r,e.jsx("span",{className:D("ml-2 px-2 py-0.5 rounded-full bg-opacity-20 text-xs font-semibold inline-block",t?"bg-white text-white":"bg-blue-100 text-blue-600"),children:s})]})}const v=t=>`/data/${t}?_=${Date.now()}`,Q=async()=>{try{const[t,s,n,r]=await Promise.all([fetch(v("missing-titles.txt"),{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}}),fetch(v("missing-dlcs.txt"),{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}}),fetch(v("missing-updates.txt"),{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}}),fetch(v("missing-old-updates.json"),{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}})]),a=async(x,j)=>{if(!x.ok)throw new Error(`Failed to load ${j}: ${x.status} ${x.statusText}`);return x};await Promise.all([a(t,"missing-titles.txt"),a(s,"missing-dlcs.txt"),a(n,"missing-updates.txt"),a(r,"missing-old-updates.json")]);const[o,i,c,d]=await Promise.all([t.text(),s.text(),n.text(),r.text()]);let h;try{h=JSON.parse(d)}catch{throw new Error("Failed to parse missing-old-updates.json: Invalid JSON format")}if(!o?.trim()||!i?.trim()||!c?.trim()||!h)throw new Error("One or more data files are empty or invalid");return{"missing-titles":N(o,"titles"),"missing-dlcs":N(i,"dlcs"),"missing-updates":N(c,"updates"),"missing-old-updates":h}}catch(t){throw console.error("Error loading data:",t),t instanceof Error?t:new Error("Failed to load data")}},N=(t,s)=>{if(!t?.trim())return{};const n=t.trim().split(`
`).filter(a=>a.trim()),r={};return n.forEach(a=>{const o=a.split("|").map(i=>i.trim());switch(s){case"titles":if(o.length===4){const[i,c,d,h]=o;r[i]={"Release Date":c,"Title Name":d,size:parseInt(h,10)||0}}break;case"dlcs":if(o.length===5){const[i,c,d,h,x]=o;r[i]={"Release Date":c,dlc_name:d,base_game:h,size:parseInt(x,10)||0}}break;case"updates":if(o.length===4){const[i,c,d,h]=o;r[i]={"Game Name":c,Version:d,"Release Date":h}}break}}),r},ee=()=>{const[t,s]=m.useState(null),[n,r]=m.useState(!0),[a,o]=m.useState(null);return m.useEffect(()=>{(async()=>{try{r(!0),o(null);const c=await Q();s(c)}catch(c){console.error("Error loading data:",c),o(c instanceof Error?c:new Error("Failed to load data"))}finally{r(!1)}})()},[]),{data:t,isLoading:n,error:a}},te="nx-missing",re="2.0.9",se="module",ae={dev:"vite",build:"tsc && vite build",preview:"vite preview",lint:"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",typecheck:"tsc --noEmit",format:'prettier --write "src/**/*.{ts,tsx}"',"prepare-deploy":"npm run typecheck && npm run build"},ne={clsx:"^2.1.0","fs-extra":"^11.2.0","lucide-react":"^0.344.0","nx-missing":"file:",react:"^18.2.0","react-dom":"^18.2.0"},oe={"@types/fs-extra":"^11.0.4","@types/react":"^18.2.56","@types/react-dom":"^18.2.19","@typescript-eslint/eslint-plugin":"^7.0.2","@typescript-eslint/parser":"^7.0.2","@vitejs/plugin-react":"^4.2.1",autoprefixer:"^10.4.18",eslint:"^8.56.0","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-react-refresh":"^0.4.5",postcss:"^8.4.35",prettier:"^3.2.5",tailwindcss:"^3.4.1",typescript:"^5.2.2",vite:"^5.1.4"},ie={name:te,private:!0,version:re,type:se,scripts:ae,dependencies:ne,devDependencies:oe};function le(){const[t,s]=m.useState("missing-titles"),[n,r]=m.useState(""),[a,o]=m.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||window.matchMedia("(prefers-color-scheme: dark)").matches:!1),{data:i,isLoading:c,error:d}=ee();if(m.useEffect(()=>{document.documentElement.classList.toggle("dark",a),localStorage.setItem("theme",a?"dark":"light")},[a]),c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading data..."})]})});if(d||!i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[e.jsxs("div",{className:"bg-red-100 dark:bg-red-900 rounded-lg p-6 mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-800 dark:text-red-200 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-600 dark:text-red-300",children:d?.message||"Failed to load data"})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})});const x={"missing-titles":Object.keys(i["missing-titles"]).length,"missing-dlcs":Object.keys(i["missing-dlcs"]).length,"missing-updates":Object.keys(i["missing-updates"]).length,"missing-old-updates":Object.values(i["missing-old-updates"]).flat().length},j=Object.values(x).reduce((p,y)=>p+y,0);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"NX Missing Content Tracker"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Version ",ie.version]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>o(!a),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":"Toggle theme",children:a?e.jsx(M,{className:"h-5 w-5"}):e.jsx(z,{className:"h-5 w-5"})}),e.jsxs("a",{href:"https://github.com/ghost-land/nx-missing",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx($,{className:"h-6 w-6"}),e.jsx("span",{className:"hidden sm:inline",children:"View on GitHub"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-200",children:j})]}),Object.entries(x).map(([p,y])=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:p.split("-").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:y})]},p))]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Object.entries(x).map(([p,y])=>e.jsx(Z,{type:p,active:t===p,count:y,onClick:()=>s(p),label:p.split("-").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ")},p))}),e.jsx(Y,{type:t,data:i[t],searchQuery:n,onSearchChange:r})]})})})}class de extends m.Component{state={hasError:!1,error:null};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){console.error("Uncaught error:",s,n)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full",children:e.jsx(F,{className:"w-6 h-6 text-red-600 dark:text-red-300"})}),e.jsx("h1",{className:"text-xl font-bold text-center text-gray-900 dark:text-white mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-6",children:this.state.error?.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors duration-200",children:"Reload Page"})]})}):this.props.children}}R(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(de,{children:e.jsx(le,{})})}));
//# sourceMappingURL=index-DdmaGP-c.js.map
