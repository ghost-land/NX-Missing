import{r as m,a as _}from"./react-uYDHyRUA.js";import{S as P,A as T,D as L,a as I,M,G as A}from"./icons-CUwXVGvD.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var D={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z=m,B=Symbol.for("react.element"),G=Symbol.for("react.fragment"),F=Object.prototype.hasOwnProperty,U=z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V={key:!0,ref:!0,__self:!0,__source:!0};function C(t,a,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),a.key!==void 0&&(o=""+a.key),a.ref!==void 0&&(l=a.ref);for(r in a)F.call(a,r)&&!V.hasOwnProperty(r)&&(s[r]=a[r]);if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:B,type:t,key:o,ref:l,props:s,_owner:U.current}}j.Fragment=G;j.jsx=C;j.jsxs=C;D.exports=j;var e=D.exports,R,w=_;R=w.createRoot,w.hydrateRoot;const $=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),q=t=>{if(!t)return"N/A";const a=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,n)).toFixed(2)} ${a[n]}`},W=t=>{if(t.endsWith("000"))return t;if(t.endsWith("800"))return t.slice(0,-3)+"000";const a=t.charAt(t.length-4),n=r=>r>="1"&&r<="9"?String(parseInt(r)-1):r>="b"&&r<="z"||r>="B"&&r<="Z"?String.fromCharCode(r.charCodeAt(0)-1):r;return t.slice(0,-4)+n(a)+"000"},K=t=>`https://api.nlib.cc/nx/${W(t)}/icon/128/128`;function H({type:t,data:a,searchQuery:n,onSearchChange:r}){const[s,o]=m.useState(1),[l,c]=m.useState(10),[d,h]=m.useState(null),y=m.useMemo(()=>{const i=[{key:"icon",label:"Icon",sortable:!1},{key:"id",label:"ID",sortable:!0}],g={"missing-titles":[{key:"Title Name",label:"Name",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0},{key:"size",label:"Size",sortable:!0}],"missing-dlcs":[{key:"dlc_name",label:"Name",sortable:!0},{key:"base_game",label:"Base Game",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0},{key:"size",label:"Size",sortable:!0}],"missing-updates":[{key:"Game Name",label:"Game",sortable:!0},{key:"Version",label:"Version",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0}],"missing-old-updates":[{key:"Version",label:"Version",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0}]};return[...i,...g[t]]},[t]),v=i=>{h(g=>({key:i,direction:g?.key===i&&g.direction==="asc"?"desc":"asc"}))},u=m.useMemo(()=>{let i=t==="missing-old-updates"?Object.entries(a).flatMap(([g,x])=>x.map(b=>({id:g,...b}))):Object.entries(a).map(([g,x])=>({id:g,...x}));if(n){const g=n.toLowerCase();i=i.filter(x=>Object.values(x).some(b=>b?String(b).toLowerCase().includes(g):!1))}return d&&i.sort((g,x)=>{let b=g[d.key],k=x[d.key];return d.key==="size"?(b=parseInt(b||"0",10),k=parseInt(k||"0",10)):d.key==="Release Date"&&(b=new Date(b).getTime(),k=new Date(k).getTime()),b<k?d.direction==="asc"?-1:1:b>k?d.direction==="asc"?1:-1:0}),i},[a,n,d,t]),p=Math.ceil(u.length/l),f=(s-1)*l,E=l===-1?u:u.slice(f,f+l);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n,onChange:i=>r(i.target.value),placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent"}),e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 h-5 w-5"})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsx("tr",{children:y.map((i,g)=>e.jsx("th",{onClick:()=>i.sortable&&v(i.key),className:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${i.sortable?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700":""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[i.label,i.sortable&&e.jsx(T,{className:`h-4 w-4 ${d?.key===i.key?"text-blue-500 dark:text-blue-400":""}`})]})},g))})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:E.map((i,g)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("img",{src:K(i.id),alt:"Game Icon",className:"w-16 h-16 rounded-lg shadow-md hover:shadow-lg transition-shadow",loading:"lazy"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900 dark:text-gray-100",children:i.id}),y.slice(2).map(x=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:x.key==="Release Date"?$(i[x.key]):x.key==="size"?q(i[x.key]):i[x.key]},x.key))]},g))})]})}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:l,onChange:i=>{c(Number(i.target.value)),o(1)},className:"border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:-1,children:"All"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(i=>Math.max(1,i-1)),disabled:s===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",s," of ",p]}),e.jsx("button",{onClick:()=>o(i=>Math.min(p,i+1)),disabled:s===p,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Next"})]})]})]})}function O(t){var a,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(a=0;a<s;a++)t[a]&&(n=O(t[a]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function S(){for(var t,a,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(a=O(t))&&(r&&(r+=" "),r+=a);return r}function J({active:t,count:a,onClick:n,label:r}){return e.jsxs("button",{onClick:n,className:S("px-4 py-2 rounded-lg font-medium text-sm transition-colors duration-200 ease-in-out",t?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[r,e.jsx("span",{className:S("ml-2 px-2 py-0.5 rounded-full bg-opacity-20 text-xs font-semibold inline-block",t?"bg-white text-white":"bg-blue-100 text-blue-600"),children:a})]})}const X=async()=>{try{const[t,a,n,r]=await Promise.all([fetch("/missing-titles.txt"),fetch("/missing-dlcs.txt"),fetch("/missing-updates.txt"),fetch("/missing-old-updates.json")]);if(!t.ok||!a.ok||!n.ok||!r.ok)throw new Error("Failed to load one or more data files");const[s,o,l]=await Promise.all([t.text(),a.text(),n.text()]),c=await r.json();return{"missing-titles":N(s,"titles"),"missing-dlcs":N(o,"dlcs"),"missing-updates":N(l,"updates"),"missing-old-updates":c}}catch(t){throw console.error("Error loading data:",t),t}},N=(t,a)=>{const n=t.trim().split(`
`).filter(s=>s.trim()),r={};return n.forEach(s=>{const o=s.split("|").map(l=>l.trim());switch(a){case"titles":if(o.length===4){const[l,c,d,h]=o;r[l]={"Release Date":c,"Title Name":d.length>50?d.substring(0,47)+"...":d,size:parseInt(h,10)||0}}break;case"dlcs":if(o.length===5){const[l,c,d,h,y]=o;r[l]={"Release Date":c,dlc_name:d.length>50?d.substring(0,47)+"...":d,base_game:h.length>50?h.substring(0,47)+"...":h,size:parseInt(y,10)||0}}break;case"updates":if(o.length===4){const[l,c,d,h]=o;r[l]={"Game Name":c.length>50?c.substring(0,47)+"...":c,Version:d,"Release Date":h}}break}}),r};function Y(){const[t,a]=m.useState(null),[n,r]=m.useState(!0),[s,o]=m.useState(null);return m.useEffect(()=>{(async()=>{try{r(!0),o(null);const c=await X();a(c)}catch(c){console.error("Error loading data:",c),o(c instanceof Error?c:new Error("Failed to load data"))}finally{r(!1)}})()},[]),{data:t,isLoading:n,error:s}}function Z(){const[t,a]=m.useState("missing-titles"),[n,r]=m.useState(""),[s,o]=m.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||window.matchMedia("(prefers-color-scheme: dark)").matches:!1),{data:l,isLoading:c,error:d}=Y();if(m.useEffect(()=>{document.documentElement.classList.toggle("dark",s),localStorage.setItem("theme",s?"dark":"light")},[s]),c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading data..."})]})});if(d||!l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[e.jsxs("div",{className:"bg-red-100 dark:bg-red-900 rounded-lg p-6 mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-800 dark:text-red-200 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-600 dark:text-red-300",children:d?.message||"Failed to load data"})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})});const y={"missing-titles":Object.keys(l["missing-titles"]).length,"missing-dlcs":Object.keys(l["missing-dlcs"]).length,"missing-updates":Object.keys(l["missing-updates"]).length,"missing-old-updates":Object.values(l["missing-old-updates"]).flat().length},v=Object.values(y).reduce((u,p)=>u+p,0);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(L,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"NX Missing Content Tracker"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>o(!s),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":"Toggle theme",children:s?e.jsx(I,{className:"h-5 w-5"}):e.jsx(M,{className:"h-5 w-5"})}),e.jsxs("a",{href:"https://github.com/ghost-land/nx-missing",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx(A,{className:"h-6 w-6"}),e.jsx("span",{className:"hidden sm:inline",children:"View on GitHub"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-200",children:v})]}),Object.entries(y).map(([u,p])=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:u.split("-").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:p})]},u))]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Object.entries(y).map(([u,p])=>e.jsx(J,{type:u,active:t===u,count:p,onClick:()=>a(u),label:u.split("-").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ")},u))}),e.jsx(H,{type:t,data:l[t],searchQuery:n,onSearchChange:r})]})})})}R(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(Z,{})}));
//# sourceMappingURL=index-8lFaCNTT.js.map
