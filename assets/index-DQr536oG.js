import{r as c,a as L}from"./react-uYDHyRUA.js";import{S as _,E as T,A as I,D as A,a as M,M as U,G as $,b as z}from"./icons-D5is6aQh.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();var E={exports:{}},N={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F=c,B=Symbol.for("react.element"),G=Symbol.for("react.fragment"),V=Object.prototype.hasOwnProperty,J=F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W={key:!0,ref:!0,__self:!0,__source:!0};function P(t,s,o){var r,a={},n=null,i=null;o!==void 0&&(n=""+o),s.key!==void 0&&(n=""+s.key),s.ref!==void 0&&(i=s.ref);for(r in s)V.call(s,r)&&!W.hasOwnProperty(r)&&(a[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:B,type:t,key:n,ref:i,props:a,_owner:J.current}}N.Fragment=G;N.jsx=P;N.jsxs=P;E.exports=N;var e=E.exports,R,C=L;R=C.createRoot,C.hydrateRoot;const q=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),K=t=>{if(!t)return"N/A";const s=["B","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,o)).toFixed(2)} ${s[o]}`},H=t=>{if(t.endsWith("000"))return t;if(t.endsWith("800"))return t.slice(0,-3)+"000";const s=t.charAt(t.length-4),o=r=>r>="1"&&r<="9"?String(parseInt(r)-1):r>="b"&&r<="z"||r>="B"&&r<="Z"?String.fromCharCode(r.charCodeAt(0)-1):r;return t.slice(0,-4)+o(s)+"000"},X=t=>`https://api.nlib.cc/nx/${H(t)}/icon/128/128`;function Y({type:t,data:s,searchQuery:o,onSearchChange:r}){const[a,n]=c.useState(1),[i,g]=c.useState(10),[d,h]=c.useState(null),p=c.useMemo(()=>{const l=[{key:"icon",label:"Icon",sortable:!1},{key:"id",label:"ID",sortable:!0}],u={"missing-titles":[{key:"Title Name",label:"Name",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0},{key:"size",label:"Size",sortable:!0}],"missing-dlcs":[{key:"dlc_name",label:"Name",sortable:!0},{key:"base_game",label:"Base Game",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0},{key:"size",label:"Size",sortable:!0}],"missing-updates":[{key:"Game Name",label:"Game",sortable:!0},{key:"Version",label:"Version",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0}],"missing-old-updates":[{key:"Version",label:"Version",sortable:!0},{key:"Release Date",label:"Release Date",sortable:!0}]};return[...l,...u[t]]},[t]),v=l=>{h(u=>({key:l,direction:u?.key===l&&u.direction==="asc"?"desc":"asc"}))},f=c.useMemo(()=>{let l=t==="missing-old-updates"?Object.entries(s).flatMap(([u,x])=>x.map(b=>({id:u,...b}))):Object.entries(s).map(([u,x])=>({id:u,...x}));if(o){const u=o.toLowerCase();l=l.filter(x=>Object.values(x).some(b=>b?String(b).toLowerCase().includes(u):!1))}return d&&l.sort((u,x)=>{let b=u[d.key],w=x[d.key];return d.key==="size"?(b=parseInt(b||"0",10),w=parseInt(w||"0",10)):d.key==="Release Date"&&(b=new Date(b).getTime(),w=new Date(w).getTime()),b<w?d.direction==="asc"?-1:1:b>w?d.direction==="asc"?1:-1:0}),l},[s,o,d,t]),y=Math.ceil(f.length/i),m=(a-1)*i,k=i===-1?f:f.slice(m,m+i);return c.useEffect(()=>{n(1)},[t,y]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-stretch sm:items-center",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",value:o,onChange:l=>r(l.target.value),placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent"}),e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 h-5 w-5"})]}),e.jsxs("a",{href:"https://nx-working.ghostland.at",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"View Working Content"]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsx("tr",{children:p.map((l,u)=>e.jsx("th",{onClick:()=>l.sortable&&v(l.key),className:`px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${l.sortable?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700":""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[l.label,l.sortable&&e.jsx(I,{className:`h-4 w-4 ${d?.key===l.key?"text-blue-500 dark:text-blue-400":""}`})]})},u))})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:k.map((l,u)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("img",{src:X(l.id),alt:"Game Icon",className:"w-12 h-12 sm:w-16 sm:h-16 rounded-lg shadow-md hover:shadow-lg transition-shadow",loading:"lazy"})}),e.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-mono text-gray-900 dark:text-gray-100",children:l.id}),p.slice(2).map(x=>e.jsx("td",{className:"px-3 sm:px-6 py-4 text-xs sm:text-sm text-gray-900 dark:text-gray-100",children:e.jsx("div",{className:"max-w-[150px] sm:max-w-[200px] md:max-w-[300px] truncate",title:l[x.key],children:x.key==="Release Date"?q(l[x.key]):x.key==="size"?K(l[x.key]):l[x.key]})},x.key))]},u))})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("div",{className:"flex items-center w-full sm:w-auto",children:e.jsxs("select",{value:i,onChange:l=>{g(Number(l.target.value)),n(1)},className:"w-full sm:w-auto border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:-1,children:"All"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n(1),disabled:a===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"First"}),e.jsx("button",{onClick:()=>n(l=>Math.max(1,l-1)),disabled:a===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",a," of ",y]}),e.jsx("button",{onClick:()=>n(l=>Math.min(y,l+1)),disabled:a===y,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Next"}),e.jsx("button",{onClick:()=>n(y),disabled:a===y,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Last"})]})]})]})}function O(t){var s,o,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(o=O(t[s]))&&(r&&(r+=" "),r+=o)}else for(o in t)t[o]&&(r&&(r+=" "),r+=o);return r}function D(){for(var t,s,o=0,r="",a=arguments.length;o<a;o++)(t=arguments[o])&&(s=O(t))&&(r&&(r+=" "),r+=s);return r}function Z({active:t,count:s,onClick:o,label:r}){return e.jsxs("button",{onClick:o,className:D("px-4 py-2 rounded-lg font-medium text-sm transition-colors duration-200 ease-in-out",t?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[r,e.jsx("span",{className:D("ml-2 px-2 py-0.5 rounded-full bg-opacity-20 text-xs font-semibold inline-block",t?"bg-white text-white":"bg-blue-100 text-blue-600"),children:s})]})}const j=t=>`/data/${t}?_=${Date.now()}`,Q=async()=>{try{const[t,s,o,r]=await Promise.all([fetch(j("missing-titles.txt"),{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}}),fetch(j("missing-dlcs.txt"),{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}}),fetch(j("missing-updates.txt"),{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}}),fetch(j("missing-old-updates.json"),{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}})]),a=async(p,v)=>{if(!p.ok)throw new Error(`Failed to load ${v}: ${p.status} ${p.statusText}`);return p};await Promise.all([a(t,"missing-titles.txt"),a(s,"missing-dlcs.txt"),a(o,"missing-updates.txt"),a(r,"missing-old-updates.json")]);const[n,i,g,d]=await Promise.all([t.text(),s.text(),o.text(),r.text()]);let h;try{h=JSON.parse(d)}catch{throw new Error("Failed to parse missing-old-updates.json: Invalid JSON format")}if(!n?.trim()||!i?.trim()||!g?.trim()||!h)throw new Error("One or more data files are empty or invalid");return{"missing-titles":S(n,"titles"),"missing-dlcs":S(i,"dlcs"),"missing-updates":S(g,"updates"),"missing-old-updates":h}}catch(t){throw console.error("Error loading data:",t),t instanceof Error?t:new Error("Failed to load data")}},S=(t,s)=>{if(!t?.trim())return{};const o=t.trim().split(`
`).filter(a=>a.trim()),r={};return o.forEach(a=>{const n=a.split("|").map(i=>i.trim()).filter(Boolean);switch(s){case"titles":if(n.length===4){const[i,g,d,h]=n;r[i]={id:i,"Release Date":g,"Title Name":d,size:parseInt(h,10)||0}}break;case"dlcs":if(n.length===5){const[i,g,d,h,p]=n;r[i]={id:i,"Release Date":g,dlc_name:d,base_game:h,size:parseInt(p,10)||0}}break;case"updates":if(n.length===4){const[i,g,d,h]=n;r[i]={id:i,"Game Name":g,Version:d,"Release Date":h}}break}}),r},ee=()=>{const[t,s]=c.useState(null),[o,r]=c.useState(!0),[a,n]=c.useState(null);return c.useEffect(()=>{(async()=>{try{r(!0),n(null);const g=await Q();s(g)}catch(g){console.error("Error loading data:",g),n(g instanceof Error?g:new Error("Failed to load data"))}finally{r(!1)}})()},[]),{data:t,isLoading:o,error:a}};function te(){const[t,s]=c.useState(()=>{const r=new URLSearchParams(window.location.search);return{tab:r.get("tab")||"missing-titles",search:r.get("search")||""}}),o=c.useCallback(r=>{s(a=>{const n={...a,...r},i=new URLSearchParams;return n.tab&&i.set("tab",n.tab),n.search&&i.set("search",n.search),window.history.pushState({},"",`${window.location.pathname}${i.toString()?"?"+i.toString():""}`),n})},[]);return c.useEffect(()=>{const r=()=>{const a=new URLSearchParams(window.location.search);s({tab:a.get("tab")||"missing-titles",search:a.get("search")||""})};return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]),{searchParams:t,updateSearchParams:o}}const re="nx-missing",ae="2.1.0",se="module",ne={dev:"vite",build:"tsc && vite build",preview:"vite preview",lint:"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",typecheck:"tsc --noEmit",format:'prettier --write "src/**/*.{ts,tsx}"',"prepare-deploy":"npm run typecheck && npm run build"},oe={clsx:"^2.1.0","fs-extra":"^11.2.0","lucide-react":"^0.344.0","nx-missing":"file:",react:"^18.2.0","react-dom":"^18.2.0"},ie={"@types/fs-extra":"^11.0.4","@types/react":"^18.2.56","@types/react-dom":"^18.2.19","@typescript-eslint/eslint-plugin":"^7.0.2","@typescript-eslint/parser":"^7.0.2","@vitejs/plugin-react":"^4.2.1",autoprefixer:"^10.4.18",eslint:"^8.56.0","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-react-refresh":"^0.4.5",postcss:"^8.4.35",prettier:"^3.2.5",tailwindcss:"^3.4.1",typescript:"^5.2.2",vite:"^5.1.4"},le={name:re,private:!0,version:ae,type:se,scripts:ne,dependencies:oe,devDependencies:ie};function de(){const{searchParams:t,updateSearchParams:s}=te(),o=t.tab||"missing-titles",r=t.search||"",[a,n]=c.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||window.matchMedia("(prefers-color-scheme: dark)").matches:!1),{data:i,isLoading:g,error:d}=ee();c.useEffect(()=>{document.documentElement.classList.toggle("dark",a),localStorage.setItem("theme",a?"dark":"light")},[a]);const h=c.useCallback(m=>{s({tab:m})},[s]),p=c.useCallback(m=>{s({search:m})},[s]);if(g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading data..."})]})});if(d||!i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[e.jsxs("div",{className:"bg-red-100 dark:bg-red-900 rounded-lg p-6 mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-800 dark:text-red-200 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-600 dark:text-red-300",children:d?.message||"Failed to load data"})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})});const f={"missing-titles":Object.keys(i["missing-titles"]).length,"missing-dlcs":Object.keys(i["missing-dlcs"]).length,"missing-updates":Object.keys(i["missing-updates"]).length,"missing-old-updates":Object.values(i["missing-old-updates"]).flat().length},y=Object.values(f).reduce((m,k)=>m+k,0);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(A,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"NX Missing Content Tracker"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Version ",le.version]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>n(!a),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":"Toggle theme",children:a?e.jsx(M,{className:"h-5 w-5"}):e.jsx(U,{className:"h-5 w-5"})}),e.jsxs("a",{href:"https://github.com/ghost-land/nx-missing",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx($,{className:"h-6 w-6"}),e.jsx("span",{className:"hidden sm:inline",children:"View on GitHub"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-200",children:y})]}),Object.entries(f).map(([m,k])=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:m.split("-").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:k})]},m))]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Object.entries(f).map(([m,k])=>e.jsx(Z,{type:m,active:o===m,count:k,onClick:()=>h(m),label:m.split("-").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ")},m))}),e.jsx(Y,{type:o,data:i[o],searchQuery:r,onSearchChange:p})]})})})}class ce extends c.Component{state={hasError:!1,error:null};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,o){console.error("Uncaught error:",s,o)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full",children:e.jsx(z,{className:"w-6 h-6 text-red-600 dark:text-red-300"})}),e.jsx("h1",{className:"text-xl font-bold text-center text-gray-900 dark:text-white mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-6",children:this.state.error?.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors duration-200",children:"Reload Page"})]})}):this.props.children}}R(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(ce,{children:e.jsx(de,{})})}));
//# sourceMappingURL=index-DQr536oG.js.map
